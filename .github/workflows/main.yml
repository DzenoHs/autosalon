name: Call API every minute

on:
  schedule:
    - cron: '*/1 * * * *' # Pokreće se svake minute
  workflow_dispatch:       # Ručno pokretanje (opcionalno)

jobs:
  call_api:
    runs-on: ubuntu-latest

    steps:
      - name: Check if cron is running
        run: echo "🕐 Cron job started at $(date -u)"

      - name: Call API endpoint
        run: |
          curl -s -o /dev/null -w "✅ API called at $(date -u)\n" \
            -X GET "https://autosalon-t95d.vercel.app/api/cron" \
            -H "Authorization: Bearer ${{ secrets.CRON_TOKEN }}" \
            -H "Content-Type: application/json"
